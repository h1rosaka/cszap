工学基礎シリーズ オペレーティングシステム 6章、7章





# 6章
p151~169

Q
p.154
>処理速度が遅い入出力装置からの割込みの処理
ここでいう遅いというのは、前ページの「入出力完了に応じた処理」をプロセッサが処理すると時間がかかる、という意味？


p156
>これを使って  コンピュータ全体の処理が遅くならないようにする．
どうやって？

>入出力レジスタ
→これは、p152で言うところの、デバイスコントローラの持つ３つのレジスタ全てを指しているか、あるいは、データレジスタだけ？

p158
>3.データ転送
ここでの転送は、前ページのポートマップトIOをベースにしている？
(メモリマップトIOなら、読み込み元も書き出し先も同じ物理メモリだから、わざわざDMAなどの複雑なことをしない？それともやはりプロセッサ資源節約のために、DMAを使う？)

p159
> プロセッサは入出力装置がバッファにデータを書き込んでいる間，別の処理をすることができる．
→これはそうかもしれないが、元々はバッファに書き込むための時間が発生せず、いきなりデバイスコントローラ内のデータレジスタを読みに行っていたのだから、そっちの方が早いのでは？


p160
>OS は個々の入出力用にブロックを保持するた  め， 入出力で待たされることがないようバッファを確保するのが一般的

なぜ、個々に入出力ブロックを保持すると、入出力で待たされるのか


1. デバイスコントローラの 3 つのレジスタについて説明せよ．
    制御レジスタ
        プロセッサが入出力装置に対する要求を書き込む
    状態レジスタ
        入出力装置の状態が書かれている
    データレジスタ
        入出力の対象となるデータが書かれている


2. OS が入出力の完了を知る方法を説明せよ． 
    ポーリング
        一定の時間間隔でOSが入出力装置の状態を確認
    割り込み
        入出力装置のデバイスコントローラが、イベント発生の際に、プロセッサに対して割り込み信号を送る。

3. プロセッサの入出力レジスタへのアクセス方法を説明せよ．  
4. 入出力装置とメモリ間のデータ転送のうち DMA のしくみについて説明せよ．  
5. デバイスドライバの役割を説明せよ．  
6. 図6.11 （164 ページ） に示す各ディスクスケジューリングにおけるヘッドの総移動  量を求めよ． 


![alt text](image.png)

ページフォールト(復習)
仮想アドレス空間のブロックであるページ(4kbのやつ)にアクセスしようとした時に、まだ物理ページが割り当てられていないと、ページフォールトが発生して、しばらく使わなそうなページの内容をスワップ領域に書き出し、このページを空き物理ページとして利用する。

デバイスファイル
    - OSにファイルとして認識させる、入出力インターフェース
    - 一般のファイルのように、READとWRITEができる
    - キャラクタデバイスとブロックデバイスの二種類がある

# 7章
p170~198

1. pipe システムコールを用いて双方向通信を行いたいときには， どのようなプログラ  ムを書けばよいか． 概略を示せ．  
2. パイプラインによって複数のコマンドが連結されている場合に， シェルは内部でど  のように処理しているか， シェル自身のプログラムの概略を予想せよ．  
3. 図7.4 において， 1 ブロックが 1 KB のとき， 保存可能なファイルの最大容量はいく  らになるか．  
4. 例えば， /etc/passwd ファイルを参照するとき， ファイルシステムはディレクトリ  や i–ノードをどのようにたどって， 最終的に目的のファイルを見つけるか説明せよ．  
5. FreeBSD や Linux など， 身近にある Unix系OS のソースを調べて， i–ノードがど  のような情報を含んでいるかを確かめよ．  
6. FreeBSD や Linux など， 身近にある Unix系OS のソースを調べて， プロセステー  ブルがどのような情報を含んでいるかを確かめよ． 

